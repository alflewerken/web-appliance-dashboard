/* ========================================================================
   PRESERVE ALL COLORS - KRITISCHER FIX V2
   ========================================================================
   Stellt sicher, dass farbige Elemente ihre Farben behalten
   MUSS als eine der letzten CSS-Dateien geladen werden
   ======================================================================== */

/* 1. SERVICE PANEL - Icon Vorschau */
.service-panel .icon-preview,
.service-panel .preview-icon,
.service-panel [class*='preview'] .icon-container,
.service-panel .MuiBox-root[style*='background-color'],
.service-panel .MuiBox-root[style*='backgroundColor'] {
  /* Inline styles haben Priorität */
  opacity: 1;
}

/* 2. KATEGORIEN - Icon Container */
.settings-panel .category-icon,
.settings-panel .icon-box,
.settings-panel [style*='background-color'][style*='border-radius'],
.settings-panel .MuiBox-root[style*='width: 36px'][style*='height: 36px'] {
  /* Kategorie-Farben sichtbar halten */
  opacity: 1;
}

/* 3. FARBIGE CONTAINER - Nur opacity, keine background-color überschreiben */
[style*='background-color: #']:not(body):not(.panel-container):not(
    .main-content
  ),
[style*='backgroundColor: #']:not(body):not(.panel-container):not(
    .main-content
  ),
[style*='background: #']:not(body):not(.panel-container):not(.main-content),
[style*='background: rgb']:not(body):not(.panel-container):not(.main-content),
[style*='background: hsl']:not(body):not(.panel-container):not(.main-content) {
  opacity: 1;
}

/* 4. MUI KOMPONENTEN */
.MuiAvatar-root,
.MuiAvatar-colorDefault,
[class*='Avatar'][style*='background'] {
  opacity: 1;
}

/* 5. STATUS & BADGES */
.status-dot,
.status-indicator,
.badge,
.chip,
.tag {
  opacity: 1;
}

/* 6. FORM ELEMENTS */
input[type='color'],
.color-input,
.color-picker,
.color-swatch,
.color-preset {
  opacity: 1;
}

/* 7. ICON CONTAINERS */
.icon-container[style*='background'],
.icon-box[style*='background'],
[class*='icon'][style*='background-color'],
[class*='Icon'][style*='background-color'] {
  opacity: 1;
}

/* 8. BUTTONS MIT FARBEN */
.MuiButton-contained,
.MuiButton-containedPrimary,
.MuiButton-containedSecondary,
.btn-primary,
.btn-secondary,
.btn-danger,
.btn-success {
  opacity: 1;
}

/* 9. CHARTS & VISUALIZATIONS */
.recharts-surface,
.chart-container,
[class*='chart'] svg,
.MuiLinearProgress-bar {
  opacity: 1;
}

/* 10. Z-INDEX FIX für Farb-Elemente */
.icon-container[style*='background'],
.MuiAvatar-root,
.color-swatch {
  position: relative;
  z-index: 1;
}

/* 11. DARK MODE SCHUTZ */
body.theme-dark [style*='backgroundColor: #'] {
  /* Im Dark Mode Farben schützen */
  opacity: 1;
}

/* 12. PANELS - Farben in Panels schützen ohne Transparenz zu überschreiben */
.panel-container [style*='background: rgb']:not(.force-transparent) {
  opacity: 1;
}

/* Debug Helper - Optional */
.debug-colors [style*='background-color'],
.debug-colors [style*='backgroundColor'] {
  outline: 2px solid red;
  outline-offset: -2px;
}
