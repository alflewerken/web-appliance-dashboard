/* ========================================================================
   PRESERVE ALL COLORS - KRITISCHER FIX
   ========================================================================
   Stellt sicher, dass ALLE farbigen Elemente ihre Farben behalten
   MUSS als eine der letzten CSS-Dateien geladen werden
   ======================================================================== */

/* 1. SERVICE PANEL - Grafische Einstellungen Icon Vorschau */
.service-panel .icon-preview,
.service-panel .preview-icon,
.service-panel [class*='preview'] .icon-container,
.service-panel .MuiBox-root[style*='background-color'],
.service-panel .MuiBox-root[style*='backgroundColor'] {
  /* Inline styles haben Priorität - NICHT überschreiben */
  opacity: 1 !important;
}

/* 2. KATEGORIEN - Icon Container in der Kategorien-Liste */
.settings-panel .category-icon,
.settings-panel .icon-box,
.settings-panel [style*='background-color'][style*='border-radius'],
.settings-panel .MuiBox-root[style*='width: 36px'][style*='height: 36px'] {
  /* Diese Box hat die Kategorie-Farbe - BEHALTEN */
  opacity: 1 !important;
}

/* 3. ALLE FARBIGEN CONTAINER */
[style*='background-color: #']:not(body):not(.panel-container):not(
    .main-content
  ),
[style*='backgroundColor: #']:not(body):not(.panel-container):not(
    .main-content
  ),
[style*='background: #']:not(body):not(.panel-container):not(.main-content),
[style*='background: rgb']:not(body):not(.panel-container):not(.main-content),
[style*='background: hsl']:not(body):not(.panel-container):not(.main-content) {
  /* ALLE Elemente mit Inline-Farben behalten ihre Farben */
  opacity: 1 !important;
}

/* 4. MUI AVATAR - Benutzer Icons */
.MuiAvatar-root,
.MuiAvatar-colorDefault,
[class*='Avatar'][style*='background'] {
  opacity: 1 !important;
}

/* 5. STATUS INDICATORS & BADGES */
.status-dot,
.status-indicator,
.online-indicator,
.offline-indicator,
.badge,
.chip,
.tag {
  opacity: 1 !important;
}

/* 6. FORM ELEMENTS - Color Inputs */
input[type='color'],
.color-input,
.color-picker,
.color-swatch,
.color-preset {
  opacity: 1 !important;
}

/* 7. ICON CONTAINERS - Generisch */
.icon-container[style*='background'],
.icon-box[style*='background'],
[class*='icon'][style*='background-color'],
[class*='Icon'][style*='background-color'] {
  opacity: 1 !important;
}

/* 8. BUTTONS MIT FARBEN */
.MuiButton-contained,
.MuiButton-containedPrimary,
.MuiButton-containedSecondary,
.btn-primary,
.btn-secondary,
.btn-danger,
.btn-success {
  opacity: 1 !important;
}

/* 9. CHARTS & VISUALIZATIONS */
.recharts-surface,
.chart-container,
[class*='chart'] svg,
.MuiLinearProgress-bar {
  opacity: 1 !important;
}

/* 10. SPEZIAL-FIX FÜR BEKANNTE PROBLEME */

/* Service Panel - Icon Vorschau Box */
.service-panel .preview-container .MuiBox-root {
  /* Nur transparente Wrapper, nicht farbige Icons */
}

.service-panel .preview-container [style*='background-color: #'] {
  /* Farbige Icons MÜSSEN sichtbar bleiben */
  background-color: var(--icon-bg-color, inherit) !important;
  opacity: 1 !important;
}

/* Kategorien Panel - Icon Boxen */
.settings-panel .MuiListItem-root .MuiBox-root[style*='background'] {
  /* Kategorie-Farben MÜSSEN sichtbar bleiben */
  opacity: 1 !important;
}

/* 11. OVERRIDE PROTECTION */
/* Verhindere, dass andere CSS diese Farben überschreibt */
[style*='background-color: #']:not(.transparent-override) {
  background-color: var(--element-bg-color, inherit) !important;
}

/* 12. Z-INDEX FIX für Farb-Elemente */
.icon-container[style*='background'],
.MuiAvatar-root,
.color-swatch {
  position: relative;
  z-index: 1;
}

/* 13. DARK MODE SPEZIFISCH */
body.theme-dark [style*='background-color: #'],
body.theme-dark [style*='backgroundColor: #'] {
  /* Im Dark Mode müssen Farben besonders geschützt werden */
  opacity: 1 !important;
}

/* 14. PANEL-SPEZIFISCHE OVERRIDES VERHINDERN */
.panel-container [style*='background-color: #']:not(.force-transparent),
.panel-container [style*='backgroundColor: #']:not(.force-transparent),
.panel-container [style*='background: #']:not(.force-transparent),
.panel-container [style*='background: rgb']:not(.force-transparent) {
  /* Diese Elemente MÜSSEN ihre Farben behalten */
  background-image: none !important; /* Entferne mögliche Overlays */
  opacity: 1 !important;
}

/* 15. DEBUG HELPER */
.debug-colors [style*='background-color'],
.debug-colors [style*='backgroundColor'] {
  outline: 2px solid red !important;
  outline-offset: -2px;
}
