/* Mobile-spezifische Button-Anpassungen für ApplianceCard */

/* Mobile Geräte only */
@media (max-width: 768px), (hover: none) and (pointer: coarse) {
  /* Basis-Anpassungen für normale Buttons auf Mobile */
  .appliance-card-container .action-btn {
    /* Standard Action-Buttons behalten ihre Größe */
    width: clamp(20px, calc(var(--card-size) * 0.15), 32px) !important;
    height: clamp(20px, calc(var(--card-size) * 0.15), 32px) !important;
  }

  /* Remote Desktop und File Transfer Buttons gleiche Größe */
  .appliance-card-container .remote-desktop-btn,
  .appliance-card-container .file-transfer-button {
    width: clamp(20px, calc(var(--card-size) * 0.15), 32px) !important;
    height: clamp(20px, calc(var(--card-size) * 0.15), 32px) !important;
  }

  /* Spezielle Touch-Optimierung für Commands Button */
  .appliance-card-container .commands-btn {
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
    user-select: none !important;
    cursor: pointer !important;
  }

  /* Services mit benutzerdefinierten Buttons in card-cover */
  .appliance-card-container .card-cover button {
    /* Nur Größenanpassung, kein Layout-Override */
    width: min(24px, 5vw) !important;
    height: min(24px, 5vw) !important;
    min-width: 20px !important;
    min-height: 20px !important;
    font-size: 11px !important;
    border-radius: 4px !important;
    padding: 0 !important;
    margin: 0 !important;
    flex-shrink: 0 !important;
  }

  /* Container-Anpassungen für Mobile - nur wo nötig */
  .appliance-card-container .card-cover {
    padding: 8px !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
  }

  /* Icons in Buttons */
  .appliance-card-container button svg,
  .appliance-card-container button i {
    width: 12px !important;
    height: 12px !important;
    min-width: 10px !important;
    min-height: 10px !important;
  }

  /* Icons für Remote Desktop und File Transfer Buttons */
  .appliance-card-container .remote-desktop-btn svg,
  .appliance-card-container .file-transfer-button svg {
    width: 14px !important;
    height: 14px !important;
    min-width: 12px !important;
    min-height: 12px !important;
  }

  /* Standard Action-Buttons (oben/unten) */
  .appliance-card-container .card-buttons-top,
  .appliance-card-container .card-buttons-bottom {
    left: 6px !important;
    right: 6px !important;
    gap: 4px !important;
  }

  .appliance-card-container .card-buttons-top {
    top: 6px !important;
  }

  .appliance-card-container .card-buttons-bottom {
    bottom: 6px !important;
  }

  /* Button-Spacer auf Mobile */
  .appliance-card-container .button-spacer {
    width: 20px !important;
    height: 20px !important;
  }

  /* Service-spezifische Buttons */
  .appliance-card-container .service-btn,
  .appliance-card-container .settings-btn-icon,
  .appliance-card-container .flip-btn,
  .appliance-card-container .edit-menu-toggle {
    width: 24px !important;
    height: 24px !important;
    min-width: 20px !important;
    min-height: 20px !important;
  }

  /* Kleine Karten auf Mobile - noch kompakter */
  .appliance-card-container[style*='--card-size: 11'] button,
  .appliance-card-container[style*='--card-size: 10'] button,
  .appliance-card-container[style*='--card-size: 9'] button,
  .appliance-card-container[style*='--card-size: 8'] button,
  .appliance-card-container[style*='--card-size: 7'] button,
  .appliance-card-container[style*='--card-size: 6'] button {
    width: 18px !important;
    height: 18px !important;
    min-width: 16px !important;
    min-height: 16px !important;
    font-size: 9px !important;
  }

  /* Spezifisch für 118px Karten auf Mobile */
  .appliance-card-container[style*='--card-size: 118px'] .card-cover button {
    width: 22px !important;
    height: 22px !important;
    min-width: 20px !important;
    min-height: 20px !important;
  }
}

/* iOS-spezifische Anpassungen */
@supports (-webkit-touch-callout: none) {
  .appliance-card-container button {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }

  /* Verhindere iOS-Zoom bei kleinen Buttons */
  .appliance-card-container {
    touch-action: manipulation;
  }
}

/* Landscape-Modus auf Mobile */
@media (max-width: 768px) and (orientation: landscape) {
  .appliance-card-container .card-cover button {
    width: min(20px, 4vw) !important;
    height: min(20px, 4vw) !important;
  }
}

/* Info-Section auf Mobile */
@media (max-width: 768px), (hover: none) and (pointer: coarse) {
  .appliance-card-container .card-info {
    padding: 12px !important;
    min-height: 60px !important;
  }

  .appliance-card-container .card-title {
    font-size: 14px !important;
    line-height: 1.2 !important;
  }

  .appliance-card-container .card-description {
    font-size: 12px !important;
    line-height: 1.3 !important;
  }

  /* Anpassung der Card-Höhe für Mobile */
  .appliance-card-container {
    height: calc(var(--card-size, 180px) + 60px) !important;
  }
}

/* Für Karten mit großen Icons - Icon kleiner machen auf Mobile */
@media (max-width: 768px) {
  .appliance-card-container .card-icon {
    width: min(50%, max(32px, calc(var(--card-size) * 0.25))) !important;
    height: min(50%, max(32px, calc(var(--card-size) * 0.25))) !important;
  }
}

/* Stelle sicher, dass alle Buttons sichtbar sind auf Mobile */
@media (max-width: 768px) {
  .appliance-card-container button {
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: auto !important;
  }

  /* Verhindere, dass Buttons außerhalb des Containers angezeigt werden */
  .appliance-card-container .card-cover,
  .appliance-card-container .card-front {
    overflow: hidden !important;
  }
}

/* Hochkant-Modus Optimierung */
@media (max-width: 768px) and (orientation: portrait) {
  .appliance-card-container[style*='--card-size: 118px'] .card-cover button {
    width: 22px !important;
    height: 22px !important;
    font-size: 10px !important;
  }
}

/* Querformat-Modus Optimierung */
@media (max-width: 768px) and (orientation: landscape) {
  .appliance-card-container[style*='--card-size: 118px'] .card-cover button {
    width: 20px !important;
    height: 20px !important;
    font-size: 9px !important;
  }
}

/* iPad-spezifische Anpassungen für bessere Touch-Unterstützung */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) {
  /* Zeige Buttons auf iPad immer an */
  .mobile-card .card-buttons-bottom {
    opacity: 0.8 !important;
    pointer-events: auto !important;
  }

  .mobile-card .card-front:hover .card-buttons-bottom,
  .mobile-card .card-front:active .card-buttons-bottom,
  .mobile-card .card-front.mobile-tap-hint .card-buttons-bottom {
    opacity: 1 !important;
  }

  /* Größere Touch-Targets für iPad */
  .mobile-card .card-buttons-bottom .action-btn {
    width: 36px !important;
    height: 36px !important;
    min-width: 32px !important;
    min-height: 32px !important;
  }

  .mobile-card .card-buttons-bottom .action-btn svg {
    width: 18px !important;
    height: 18px !important;
  }
}

/* Alternative: Alle Touch-Geräte mit größeren Bildschirmen (Tablets) */
@media (hover: none) and (pointer: coarse) and (min-width: 768px) {
  .mobile-card .card-buttons-bottom {
    opacity: 0.7 !important;
    transition: opacity 0.2s ease;
  }

  .mobile-card:hover .card-buttons-bottom,
  .mobile-card:active .card-buttons-bottom {
    opacity: 1 !important;
  }
}

/* Fix für Touch-Events auf Mobile Buttons */
@media (hover: none) and (pointer: coarse) {
  /* Stelle sicher, dass Buttons immer Touch-Events empfangen */
  .mobile-card .card-buttons-bottom .action-btn {
    position: relative;
    z-index: 10;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    touch-action: manipulation;
  }

  /* Vergrößere Touch-Bereich für bessere Treffsicherheit */
  .mobile-card .card-buttons-bottom .action-btn::before {
    content: '';
    position: absolute;
    top: -8px;
    left: -8px;
    right: -8px;
    bottom: -8px;
    z-index: -1;
  }

  /* Verhindere, dass Parent-Elements Touch-Events abfangen */
  .mobile-card .card-front {
    touch-action: pan-y pinch-zoom;
  }

  .mobile-card .card-cover {
    pointer-events: none;
  }

  .mobile-card .card-cover .card-buttons-bottom {
    pointer-events: auto;
  }

  .mobile-card .card-cover .card-buttons-bottom .action-btn {
    pointer-events: auto;
  }
}
